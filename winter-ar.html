<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Winter AR â€” Snowmen & Pine Trees</title>
  <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
  <style>
    body { margin:0; overflow:hidden; }
    .hint { position:absolute; bottom:12px; left:12px; background:rgba(0,0,0,0.6); color:white; padding:8px 12px; border-radius:8px; z-index:10;}
  </style>
</head>
<body>
  <div class="hint">Tap/click anywhere to spawn snowmen or pine trees.</div>

  <a-scene embedded>
    <!-- Camera -->
    <a-entity camera look-controls position="0 2 5"></a-entity>

    <!-- Ground plane -->
    <a-plane rotation="-90 0 0" width="20" height="20" color="#7ec850" position="0 0 0"></a-plane>

    <!-- Container for spawned objects -->
    <a-entity id="placements"></a-entity>

    <!-- Snowman prototype -->
    <a-entity id="prototype-snowman" visible="false">
      <a-sphere radius="0.24" position="0 0.24 0" color="#fff"></a-sphere>
      <a-sphere radius="0.18" position="0 0.60 0" color="#fff"></a-sphere>
      <a-sphere radius="0.12" position="0 0.90 0" color="#fff"></a-sphere>
    </a-entity>

    <!-- Pine tree prototype -->
    <a-entity id="prototype-pinetree" visible="false">
      <a-cylinder radius="0.03" height="0.18" position="0 0.09 0" color="#5b3a21"></a-cylinder>
      <a-cone radius-bottom="0.25" radius-top="0.01" height="0.28" position="0 0.30 0" color="#0b8a2e"></a-cone>
      <a-cone radius-bottom="0.19" radius-top="0.01" height="0.24" position="0 0.45 0" color="#0fa43a"></a-cone>
    </a-entity>
  </a-scene>

  <script>
    const scene = document.querySelector('a-scene');
    const container = document.getElementById('placements');

    function spawnObject(evt) {
      const choice = Math.random() < 0.5 ? 'prototype-snowman' : 'prototype-pinetree';
      const proto = document.getElementById(choice).cloneNode(true);
      proto.setAttribute('visible','true');

      // Get click/tap position and convert to world coordinates on ground plane
      const cursorPos = evt.detail ? evt.detail.intersection.point : null;
      let x = 0, y = 0, z = 0;
      if(cursorPos){
        x = cursorPos.x;
        y = 0;
        z = cursorPos.z;
      } else {
        // fallback: random position on ground
        x = (Math.random()-0.5)*10;
        y = 0;
        z = (Math.random()-0.5)*10;
      }

      proto.setAttribute('position', `${x} ${y} ${z}`);
      container.appendChild(proto);
    }

    // Tap/click listener
    scene.addEventListener('click', spawnObject);
    scene.addEventListener('touchstart', spawnObject);
  </script>
</body>
</html>
