<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Winter AR â€” Snowmen & Pine Trees</title>
<script src="https://aframe.io/releases/1.7.1/aframe.min.js"></script>
<style>
  body { margin: 0; overflow: hidden; }
  .hint { position: absolute; bottom: 12px; left: 12px; background: rgba(0,0,0,0.6); color: white; padding: 8px 12px; border-radius: 8px; z-index: 10; }
</style>
</head>
<body>
  <div class="hint">Tap screen to place a snowman or pine tree.</div>

  <a-scene
    webxr="requiredFeatures: hit-test"
    vr-mode-ui="enabled: false"
    embedded
    renderer="colorManagement: true;">

    <!-- AR camera -->
    <a-camera camera></a-camera>

    <!-- Optional fallback plane for desktop preview -->
    <a-plane rotation="-90 0 0" width="20" height="20" color="#7ec850" position="0 0 0"></a-plane>

    <!-- Placement container -->
    <a-entity id="placements"></a-entity>

    <!-- Snowman prototype -->
    <a-entity id="prototype-snowman" visible="false">
      <a-sphere radius="0.24" position="0 0.24 0" color="#fff"></a-sphere>
      <a-sphere radius="0.18" position="0 0.60 0" color="#fff"></a-sphere>
      <a-sphere radius="0.12" position="0 0.90 0" color="#fff"></a-sphere>
    </a-entity>

    <!-- Pine tree prototype -->
    <a-entity id="prototype-pinetree" visible="false">
      <a-cylinder radius="0.03" height="0.18" position="0 0.09 0" color="#5b3a21"></a-cylinder>
      <a-cone radius-bottom="0.25" radius-top="0.01" height="0.28" position="0 0.30 0" color="#0b8a2e"></a-cone>
      <a-cone radius-bottom="0.19" radius-top="0.01" height="0.24" position="0 0.45 0" color="#0fa43a"></a-cone>
    </a-entity>

  </a-scene>

  <script>
    const scene = document.querySelector('a-scene');
    const container = document.getElementById('placements');

    function spawnObject(evt) {
      const choice = Math.random() < 0.5 ? 'prototype-snowman' : 'prototype-pinetree';
      const proto = document.getElementById(choice).cloneNode(true);
      proto.setAttribute('visible','true');

      // hit-test point if AR
      let pos = evt.detail && evt.detail.intersection ? evt.detail.intersection.point : null;
      if (pos) {
        proto.setAttribute('position', `${pos.x} 0 ${pos.z}`);
      } else {
        // fallback random
        proto.setAttribute('position', `${(Math.random()-0.5)*10} 0 ${(Math.random()-0.5)*10}`);
      }
      container.appendChild(proto);
    }

    scene.addEventListener('click', spawnObject);
    scene.addEventListener('touchstart', spawnObject);
  </script>

</body>
</html>
